# predictive_consistency_gap@1
# Multi-Slot Consistency Gap Contract
# Phase 7 Step 6: Cross-slot conflict detection

version: 1
contract_id: predictive_consistency_gap@1
description: |
  Vector-based consistency profile detecting conflicts between slots:
  - Safety ↔ Production (Slot03 ↔ Slot07)
  - Culture ↔ Deployment (Slot06 ↔ Slot10)
  - Predictive ↔ Production (PTE ↔ Slot07)

fields:
  score:
    type: float
    range: [0.0, 1.0]
    description: "Composite consistency gap (weighted sum of components)"

  components:
    type: map<string, float>
    description: "Individual conflict scores by type"
    keys:
      - safety_production_conflict
      - culture_deployment_conflict
      - production_predictive_conflict

  conflicting_slots:
    type: list<string>
    description: "Slot IDs in conflict (e.g., ['slot03', 'slot07'])"

  severity:
    type: float
    range: [0.0, 1.0]
    description: "Maximum component conflict (worst-case severity)"

  caused_by:
    type: list<string>
    description: "EPD pattern types that contributed to inconsistency"

  source_snapshot_hash:
    type: string
    description: "Predictive snapshot hash for audit trail"

  timestamp:
    type: float
    description: "Profile generation timestamp"

thresholds:
  gap_threshold: 0.6  # Governance hold if score >= 0.6
  severity_threshold: 0.7  # Governance hold if severity >= 0.7

semantic_mirror:
  key: predictive.consistency_gap
  ttl: 180
  publisher: governance
  readers:
    - governance
    - router
    - slot07_production_controls
    - slot10_civilizational_deployment

ontology_ref: specs/nova_framework_ontology.v1.yaml
related_contracts:
  - predictive_consistency@1
  - tri_truth_signal@1
  - slot07_production@2
