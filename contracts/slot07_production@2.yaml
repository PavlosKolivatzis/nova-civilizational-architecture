schema: nova_contract/v1
contract_id: slot07_production@2
title: Wisdom Governor TRI Truth Consumption
description: >
  Slot07 (Adaptive Wisdom Governor / Production Controls) consumes the
  canonical TRI truth signal for eta gating, stability decisions, and
  breaker telemetry. tri_coherence becomes the canonical truth input.

depends_on: tri_truth_signal@1

slots:
  - id: 4
    name: TRI Engine
    role: truth_canonizer
  - id: 7
    name: Production Controls
    role: controller
  - id: 1
    name: Truth Anchor
    role: attestor (read-only)

interfaces:
  inputs:
    tri_truth_signal@1:
      consumed_fields:
        - tri_coherence
        - tri_drift_z
        - tri_jitter
        - canonical_hash
      semantic_mirror_key: slot04.tri_truth_signal
      ttl_seconds: 45
  outputs:
    production_mode:
      depends_on: tri_band
    breaker_state:
      includes_tri_metadata: true

controller_rules:
  - name: eta_cap_from_tri
    rule: "eta_cap = tri_coherence * ETA_MAX; freeze when tri_coherence < 0.45."
  - name: drift_triggered_backpressure
    rule: "tri_drift_z >= 2.2 => NOVA_SLOT07_STABILITY_THRESHOLD raised to 0.05."
  - name: jitter_watchdog
    rule: "tri_jitter > 0.3 => breaker_state='diagnostic', log at WARN."
  - name: attestation_handshake
    rule: "When NOVA_SLOT01_ROOT_MODE=1 and tri_band != 'green', enqueue Slot01 attestation using canonical_hash."

observability:
  semantic_mirror_reads:
    - key: slot04.tri_truth_signal
      requester: slot07_production_controls
  metrics:
    - nova_slot07_tri_coherence
    - nova_slot07_tri_drift_z
    - nova_slot07_tri_jitter
    - nova_slot01_attest_latency_ms

safety_guarantees:
  - "Breaker cannot return to BASELINE until tri_coherence >= 0.6 for 3 consecutive samples."
  - "Attestation hook required for all breaker events emitted in root-mode."
  - "No direct writes to attest_ledger; Slot07 only requests Slot01 RPC."

version: "2.0.0"
created_at: "2025-11-19T00:00:00Z"
