# Nova Defects Register
# Generated from Phase 1-3 audit findings
# Audit Sprint: Complete (2025-10-04 through 2025-10-05)
# Status: P0 complete, P1 majority resolved/mitigated

metadata:
  baseline_commit: b4d1793
  audit_sprint_start: 2025-10-04
  audit_sprint_end: 2025-10-05
  audit_sprint_status: COMPLETE
  total_defects: 28
  p0_count: 4
  p0_resolved: 4
  p0_completion: 100%
  p1_count: 8
  p1_resolved: 4
  p1_mitigated: 1
  p1_remaining: 3
  p1_completion: 62.5%
  p2_count: 10
  p3_count: 6
  last_updated: 2025-10-05
  commits_merged: 6
  tests_passing: 866
  tests_failing: 0

defects:
  # ============================================================================
  # P0 - CRITICAL (System Broken, Immediate Fix Required)
  # ============================================================================

  - id: DEF-001
    priority: P0
    severity: CRITICAL
    status: RESOLVED
    resolution_commit: fc68de1
    title: "Contract metadata gap: 6 out of 10 flow fabric contracts undocumented"
    description: |
      Flow fabric has 10 registered contracts in orchestrator/flow_fabric_init.py:18-29
      but only 4 have metadata declarations in slot meta.yaml files.
      Missing: EMOTION_REPORT@1, DELTA_THREAT@1, PRODUCTION_CONTROL@1, META_LENS_REPORT@1,
      CONSTELLATION_REPORT@1, SIGNALS@1
    impact: "Contract versioning and lifecycle management impossible without metadata"
    evidence:
      - "DRIFT_REPORT.md:141-153"
      - "orchestrator/flow_fabric_init.py:18-29"
      - "grep -r 'produces:' slots --include='*.yaml'"
    root_cause: "Missing meta.yaml files for slot03, slot07 + incomplete metadata in slot02, slot05 + legacy SIGNALS@1"
    resolution: |
      - Created slot03_emotional_matrix.meta.yaml (produces EMOTION_REPORT@1, PRODUCTION_CONTROL@1)
      - Created slot07_production_controls.meta.yaml (consumes PRODUCTION_CONTROL@1)
      - Updated slot02_deltathresh.meta.yaml (added DELTA_THREAT@1, META_LENS_REPORT@1)
      - Updated slot05_constellation.meta.yaml (added CONSTELLATION_REPORT@1)
      - Removed legacy SIGNALS@1 from KNOWN_CONTRACTS
      - Added tests/meta/test_contract_metadata.py validation suite (4 tests)
      - Result: 9/9 contracts (100% coverage, up from 4/10)
    test_coverage: "tests/meta/test_contract_metadata.py - 4/4 passing"

  - id: DEF-002
    priority: P0
    severity: CRITICAL
    status: RESOLVED
    resolution_commit: eaa15ba
    title: "slot04_tri_engine README contains false integration claims"
    description: |
      slots/slot04_tri_engine/README.md:17 claims:
      - "Cultural effectiveness weighting (Slot 6)" - FALSE
      - "Performance metrics for Slot 7 monitoring" - FALSE
      grep verification proves ZERO imports in slot06 and slot07
    impact: "Misleading documentation, developers waste time on non-existent integrations"
    evidence:
      - "DRIFT_REPORT.md:37-49"
      - "grep -r 'slot04_tri_engine' slots/slot06_cultural_synthesis/ → 0 results"
      - "grep -r 'slot04_tri_engine' slots/slot07_production_controls/ → 0 results"
    root_cause: "README stale 49 days, reflects intended architecture never implemented"
    resolution: |
      - Rewrote slot04_tri_engine/README.md with accurate dual-engine architecture
      - Removed false Slot 6/7 direct integration claims
      - Documented adapter-mediated routing via orchestrator/adapters/slot4_tri.py
      - Clarified Engine 1 (operational) vs Engine 2 (content analysis) split
      - Updated REPO_MAP.md with dual-engine architecture explanation

  - id: DEF-003
    priority: P0
    severity: CRITICAL
    status: RESOLVED
    resolution_commit: eaa15ba
    title: "Duplicate Slot 4 implementations with unclear ownership"
    description: |
      Two Slot 4 implementations exist:
      - slots/slot04_tri/ (operational, 828 lines, flow mesh connected)
      - slots/slot04_tri_engine/ (content analysis, 637 lines, zombie state)
      orchestrator/adapters/slot4_tri.py routes to BOTH but ownership unclear
    impact: "Unclear which implementation to maintain, test, or deprecate"
    evidence:
      - "DRIFT_REPORT.md:21-62"
      - "REPO_MAP.md:47-48"
      - "orchestrator/adapters/slot4_tri.py:31"
    root_cause: "Intentional dual-engine architecture, not duplicate - documentation gap only"
    resolution: |
      - Investigation proved NOT duplicates - intentional dual-engine architecture
      - Engine 1 (slot04_tri): Operational monitoring, get_latest_report()
      - Engine 2 (slot04_tri_engine): Content analysis, calculate(content, context)
      - orchestrator/adapters/slot4_tri.py routes based on method called
      - Updated REPO_MAP.md and README.md to document architecture
      - Reclassified from "duplicate code" to "documentation drift"
    remediation: "Either: (1) Complete deletion of slot04_tri_engine OR (2) Document dual-engine architecture with ownership"
    test_gap: "No test validates single source of truth for TRI calculation"

  - id: DEF-004
    priority: P0
    severity: CRITICAL
    status: RESOLVED
    resolution_commit: 3ff904b
    title: "Duplicate Slot 8 implementations with unclear ownership"
    description: |
      Two Slot 8 implementations exist:
      - slots/slot08_memory_ethics/ (README 48 days stale)
      - slots/slot08_memory_lock/ (README 11 days lag)
      Unclear which is canonical
    impact: "Unclear which implementation to maintain, test, or deprecate"
    evidence:
      - "DRIFT_REPORT.md:65-77"
      - "REPO_MAP.md:52-53"
      - "git log -1 --format='%ci' slots/slot08_memory_ethics/README.md → 2025-08-13"
      - "orchestrator/adapters/slot8_memory_ethics.py:6 - imports legacy only"
      - "slot08_memory_lock/README.md:399-410 - documents dual architecture"
    root_cause: "Migration-ready dual architecture - legacy (active) + Processual 4.0 (not yet integrated)"
    resolution: |
      - Investigation proved NOT duplicates - intentional migration path
      - slot08_memory_ethics: Legacy ACL-based protection - CURRENTLY USED by orchestrator
      - slot08_memory_lock: Processual 4.0 self-healing IDS - MIGRATION-READY (not integrated)
      - orchestrator/adapters/slot8_memory_ethics.py imports legacy only (no routing to advanced)
      - Updated REPO_MAP.md: removed "DUPLICATE" warnings, added migration-ready status
      - Updated slot08_memory_ethics/README.md: added dual architecture context + migration path
    test_gap: "No test validates single source of truth for memory ethics"

  # ============================================================================
  # P1 - HIGH (Major Impact, Fix ASAP)
  # ============================================================================

  - id: DEF-005
    priority: P1
    severity: HIGH
    status: RESOLVED
    resolution_commit: 5fa346f
    title: "94% of environment variables undocumented"
    description: |
      142 env vars discovered in code, only 8 documented in .env.example
      134 undocumented vars across 18 categories: feature flags, unlearn system, ANR, creativity, etc.
    impact: "Impossible to configure system without reading source code"
    evidence:
      - "DRIFT_REPORT.md:228-238"
      - ".env.example:1-9 (before fix)"
      - "grep -roh 'os\.getenv' --include='*.py' | sed | sort -u | wc -l → 142"
    root_cause: ".env.example not updated as features added"
    resolution: |
      - Expanded .env.example from 8 to 142 variables (100% coverage)
      - Organized into 18 logical categories for developer discoverability
      - Added inline comments explaining each variable's purpose
      - Inferred sensible defaults from actual code usage patterns
      - Preserved existing 8 vars with same values
      - Verification: comm -23 check showed zero gaps, zero extras
    test_coverage: "Validation test recommended (see TEST_GAPS.md)"

  - id: DEF-006
    priority: P1
    severity: HIGH
    title: "Test coverage 5% below target (80% vs 85%)"
    description: |
      Overall coverage: 80% (23,496 statements, 4,657 missed)
      Target: ≥85%
      Low coverage areas: fuzzy_loader.py (84%), test_health_perf.py (81%), test_slot07_adapter_metrics.py (81%)
    impact: "Insufficient test coverage risks regressions"
    evidence:
      - "phase1_summary.txt"
      - "pytest --cov --cov-report=term-missing"
    root_cause: "Tests not written for newer code paths"
    reproduction: "pytest --cov --cov-report=term-missing | grep -E '(TOTAL|fuzzy_loader)'"
    remediation: "Add tests to reach 85% coverage, prioritize critical paths"
    test_gap: "Documented in phase1_summary.txt low coverage sections"

  - id: DEF-007
    priority: P1
    severity: HIGH
    title: "249 linting issues (ruff)"
    description: |
      Ruff found 249 linting violations:
      - F401 (unused imports)
      - E402 (import not at top of file)
      - Others TBD from phase2_summary.txt
    impact: "Code quality issues, potential bugs hiding in violations"
    evidence:
      - "phase2_summary.txt"
      - "ruff check . --output-format=json"
    root_cause: "Linting not enforced in pre-commit hooks"
    reproduction: "ruff check . | wc -l"
    remediation: "Fix violations, add ruff to pre-commit hooks"
    test_gap: "No CI gate enforces ruff clean"

  - id: DEF-008
    priority: P1
    severity: HIGH
    title: "23 type errors (mypy)"
    description: |
      MyPy found 23 type errors
      Missing stubs: types-PyYAML, types-requests, types-jsonschema
    impact: "Type safety compromised, runtime errors possible"
    evidence:
      - "phase2_summary.txt"
      - "mypy orchestrator slots --ignore-missing-imports"
    root_cause: "Type hints incomplete, missing type stubs"
    reproduction: "mypy orchestrator slots | grep 'error:' | wc -l"
    remediation: "Install type stubs, add type hints, fix errors"
    test_gap: "No CI gate enforces mypy clean"

  - id: DEF-009
    priority: P1
    severity: HIGH
    status: RESOLVED
    title: "Flask debug=True security vulnerability (bandit B201)"
    description: |
      app.py:120 ran Flask with debug=True, exposing Werkzeug debugger
      Enables arbitrary code execution via interactive debugger (CWE-94)
    impact: "Arbitrary code execution in production if debug enabled"
    evidence:
      - "phase2_bandit.json (B201, HIGH severity)"
      - "app.py:120 (before fix)"
    root_cause: "Hardcoded debug=True in Flask app.run()"
    reproduction: "python -m bandit -r app.py --format=json | grep B201"
    resolution_status: "RESOLVED"
    resolution_date: "2025-10-05"
    resolution_commit: "TBD (fix/def-009-flask-debug branch)"
    resolution_strategy: |
      Gated debug mode with FLASK_DEBUG env var (default off)
      - app.py:119 reads os.getenv("FLASK_DEBUG", "0")
      - Added .env.example documentation
      - Bandit scan confirms 0 HIGH issues
    verification: "python -m bandit -r app.py confirms 0 HIGH issues"
    rollback: "git revert <commit> to restore debug=True"
    test_gap: "No CI gate blocks HIGH security findings (tracked separately)"

  - id: DEF-010
    priority: P1
    severity: HIGH
    status: MITIGATED
    title: "pip vulnerability CVE-2025-8869 in pip 25.2"
    description: |
      pip 25.2 tarfile link escape vulnerability (GHSA-4xh5-x5gv-qwph / CVE-2025-8869)
      Allows arbitrary file overwrite via malicious sdist symbolic/hard links
    impact: "Arbitrary file overwrite during sdist installation"
    evidence:
      - "python -m pip_audit --format=json (2025-10-05)"
      - "SECURITY.md:L6-L38"
      - "README.md:L91,L96"
    root_cause: "Upstream pip 25.2 vulnerability, fix planned for 25.3"
    reproduction: "python -m pip_audit --format=json 2>&1 | grep GHSA-4xh5-x5gv-qwph"
    mitigation_status: "ACTIVE"
    mitigation_date: "2025-10-05"
    mitigation_commit: "TBD (fix/def-010-pip-cve branch)"
    mitigation_strategy: |
      Enforce wheel-only installations via --only-binary :all: flag
      - Updated README.md installation instructions
      - Created SECURITY.md with CVE details and mitigation policy
      - Monitor https://github.com/pypa/pip/releases for pip 25.3
    remediation: "Upgrade pip to 25.3+ when released (tracked in SECURITY.md)"
    rollback: "Remove --only-binary :all: flag after pip 25.3+ upgrade"
    test_gap: "No dependency vulnerability scanning in CI (tracked separately)"
    references:
      - "https://github.com/pypa/pip/security/advisories/GHSA-4xh5-x5gv-qwph"
      - "https://github.com/pypa/pip/pull/13550"

  - id: DEF-011
    priority: P1
    severity: HIGH
    status: RESOLVED
    title: "Duplicate /metrics endpoint definition (clarified)"
    description: |
      /metrics endpoint defined in TWO places:
      - orchestrator/app.py:308 (active, flag-gated production endpoint)
      - orchestrator/http_metrics.py:12 (test-only router, not included in app)
      Investigation revealed http_metrics.py router never included in main app.
      No actual duplication in runtime, but documentation gap caused confusion.
    impact: "Documentation confusion (no runtime impact)"
    evidence:
      - "orchestrator/app.py:308 (active endpoint)"
      - "orchestrator/http_metrics.py:12 (standalone router)"
      - "grep -n 'http_metrics' orchestrator/app.py → no matches"
      - "tests/metrics/test_build_info.py:65 (test uses http_metrics router)"
    root_cause: "Missing documentation explaining http_metrics.py is test-only"
    reproduction: "grep -rn 'def metrics' orchestrator/ shows both definitions"
    resolution_status: "RESOLVED"
    resolution_date: "2025-10-05"
    resolution_commit: "TBD (fix/def-011-metrics-duplicate branch)"
    resolution_strategy: |
      Clarified http_metrics.py purpose with module docstring:
      - Added NOTE explaining router not included in main app
      - Documents test-only and reference usage
      - Points users to app.py:308 for production endpoint
      - No code changes to app.py (production endpoint unchanged)
    verification: "tests/metrics/test_build_info.py passes (4/4)"
    rollback: "git revert to remove documentation"
    test_gap: "No test validates single /metrics endpoint in production app"

  - id: DEF-012
    priority: P1
    severity: HIGH
    status: RESOLVED
    title: "9 broken documentation links"
    description: |
      9 broken links found: 5 missing runbooks, 3 git commit links, 1 SLO runbook
      - ops/runbooks/README.md: slot1.md, feature-flags.md, tri-link.md, lifespan.md, shared-hash.md
      - docs/SLOs.md: 3x runbooks/*, not yet created
      - docs/attestations/2025-09-30-anr-5_1.md: 3x ../../../commit/* (GitHub-relative paths)
    impact: "Documentation navigation broken"
    evidence:
      - "Link checker script shows 13 total (4 false positives from regex patterns)"
      - "ops/runbooks/ only contains slot6.md, observability.md"
    root_cause: "Links added aspirationally before target files created"
    reproduction: "python link_checker.py (after filtering regex patterns)"
    resolution_status: "RESOLVED"
    resolution_date: "2025-10-05"
    resolution_commit: "TBD (fix/def-012-broken-links branch)"
    resolution_strategy: |
      Replaced broken links with plain text + tech debt tracking:
      - ops/runbooks/README.md: Listed missing runbooks as "In Development"
      - docs/SLOs.md: Replaced links with plain list + reference to ops/runbooks
      - docs/attestations/*.md: Replaced GitHub commit links with plain SHAs
      - All broken links now documented as planned work
    verification: "Link checker shows 0 broken links (excluding regex patterns)"
    rollback: "git revert to restore original links"
    test_gap: "No CI link checker (tracked separately)"

  # ============================================================================
  # P2 - MEDIUM (Moderate Impact, Fix Soon)
  # ============================================================================

  - id: DEF-013
    priority: P2
    severity: MEDIUM
    title: "2 stale READMEs (>30 days lag)"
    description: |
      slot04_tri_engine/README.md: 49 days stale
      slot08_memory_ethics/README.md: 48 days stale
      Both are duplicate slot implementations
    impact: "Documentation doesn't reflect current code"
    evidence:
      - "DRIFT_REPORT.md:318-331"
      - "git log -1 --format='%ci' slots/slot04_tri_engine/README.md"
    root_cause: "READMEs not updated with code changes"
    reproduction: |
      git log -1 --format='%ci' slots/slot04_tri_engine/README.md
      git log -1 --format='%ci' slots/slot04_tri_engine/
    remediation: "Update stale READMEs or archive if implementations are legacy"
    test_gap: "No automated staleness detection"

  - id: DEF-014
    priority: P2
    severity: MEDIUM
    title: "Version inconsistencies within Slot 2"
    description: |
      Slot 2 has multiple version strings:
      - 1.0.0 (core)
      - 2.0.0 (enhanced)
      - 6.5 (config)
      Unclear which is canonical
    impact: "Version tracking confused"
    evidence:
      - "DRIFT_REPORT.md:151"
    root_cause: "Multiple VERSION constants in same slot"
    reproduction: "grep -r 'VERSION.*=' slots/slot02_deltathresh/"
    remediation: "Standardize to single version string"
    test_gap: "No test validates version consistency"

  - id: DEF-015
    priority: P2
    severity: MEDIUM
    title: "325 files need formatting (ruff format)"
    description: |
      Ruff format check shows 325 files out of compliance
    impact: "Inconsistent code style"
    evidence:
      - "phase2_summary.txt"
      - "ruff format --check ."
    root_cause: "Formatting not enforced"
    reproduction: "ruff format --check . | grep 'would reformat' | wc -l"
    remediation: "Run ruff format, add to pre-commit"
    test_gap: "No CI formatting gate"

  - id: DEF-016
    priority: P2
    severity: MEDIUM
    title: "113 TODO/FIXME audit tags"
    description: |
      113 audit tags across 45 files
    impact: "Untracked technical debt"
    evidence:
      - "phase2_summary.txt"
      - "grep -r 'TODO\\|FIXME' orchestrator slots"
    root_cause: "TODOs added but not tracked"
    reproduction: "grep -r 'TODO\\|FIXME' orchestrator slots | wc -l"
    remediation: "Convert TODOs to tracked issues"
    test_gap: "No TODO inventory process"

  - id: DEF-017
    priority: P2
    severity: MEDIUM
    title: "3 risky subprocess/eval patterns"
    description: |
      Found 3 uses of subprocess or eval
    impact: "Potential code injection risk"
    evidence:
      - "phase2_summary.txt"
      - "grep -r 'subprocess\\|eval' orchestrator slots"
    root_cause: "Unsafe patterns not reviewed"
    reproduction: "grep -r 'subprocess\\|eval' orchestrator slots"
    remediation: "Review and sanitize subprocess calls"
    test_gap: "No security review process"

  - id: DEF-018
    priority: P2
    severity: MEDIUM
    title: "166 potential secrets references"
    description: |
      Found 166 references to api_key, secret, token, password
    impact: "Potential secret leakage"
    evidence:
      - "phase2_summary.txt"
      - "grep -ri 'api_key\\|secret\\|token\\|password' orchestrator slots"
    root_cause: "No secret scanning"
    reproduction: "grep -ri 'api_key\\|secret\\|token\\|password' orchestrator slots | wc -l"
    remediation: "Manual review, implement secret scanning"
    test_gap: "No automated secret detection"

  - id: DEF-019
    priority: P2
    severity: MEDIUM
    title: "Slot 2 missing 3 flow fabric contracts in metadata"
    description: |
      flow_fabric_init.py declares DELTA_THREAT@1, META_LENS_REPORT@1, DETECTION_REPORT@1 from Slot 2
      but slot02_deltathresh.meta.yaml only declares DETECTION_REPORT@1
    impact: "Incomplete contract metadata for Slot 2"
    evidence:
      - "DRIFT_REPORT.md:145-147"
      - "slots/slot02_deltathresh/slot02_deltathresh.meta.yaml"
    root_cause: "meta.yaml not updated when contracts added"
    reproduction: |
      grep -A5 "produces:" slots/slot02_deltathresh/*.yaml
      grep "DELTA_THREAT\\|META_LENS" orchestrator/flow_fabric_init.py
    remediation: "Add missing contracts to slot02 meta.yaml produces section"
    test_gap: "No test validates metadata completeness per slot"

  - id: DEF-020
    priority: P2
    severity: MEDIUM
    title: "Slot 5 missing CONSTELLATION_REPORT@1 in metadata"
    description: |
      flow_fabric_init.py declares CONSTELLATION_REPORT@1 from Slot 5
      but slot05 meta.yaml only declares CONSTELLATION_STATE@1
    impact: "Incomplete contract metadata for Slot 5"
    evidence:
      - "DRIFT_REPORT.md:148"
      - "slots/slot05_constellation/*.yaml"
    root_cause: "meta.yaml not updated when contract added"
    reproduction: |
      grep -A5 "produces:" slots/slot05_constellation/*.yaml
      grep "CONSTELLATION_REPORT" orchestrator/flow_fabric_init.py
    remediation: "Add CONSTELLATION_REPORT@1 to slot05 meta.yaml or remove from flow fabric"
    test_gap: "No test validates contract registration matches metadata"

  - id: DEF-021
    priority: P2
    severity: MEDIUM
    title: "No meta.yaml for Slot 3 (EMOTION_REPORT@1 undocumented)"
    description: |
      flow_fabric_init.py declares EMOTION_REPORT@1, PRODUCTION_CONTROL@1 from Slot 3
      but no slot03*.meta.yaml file exists
    impact: "Zero metadata for Slot 3 contracts"
    evidence:
      - "DRIFT_REPORT.md:144"
      - "find slots/slot03_emotional_matrix -name '*.yaml'"
    root_cause: "meta.yaml never created for Slot 3"
    reproduction: "ls slots/slot03_emotional_matrix/*.yaml"
    remediation: "Create slot03_emotional_matrix.meta.yaml with produces/consumes"
    test_gap: "No test enforces meta.yaml existence for all slots"

  - id: DEF-022
    priority: P2
    severity: MEDIUM
    title: "No meta.yaml for Slot 7 (PRODUCTION_CONTROL@1 undocumented)"
    description: |
      flow_fabric_init.py declares PRODUCTION_CONTROL@1 consumed by Slot 7
      but no slot07*.meta.yaml file exists
    impact: "Zero metadata for Slot 7 contracts"
    evidence:
      - "DRIFT_REPORT.md:146"
      - "find slots/slot07_production_controls -name '*.yaml'"
    root_cause: "meta.yaml never created for Slot 7"
    reproduction: "ls slots/slot07_production_controls/*.yaml"
    remediation: "Create slot07_production_controls.meta.yaml with consumes declaration"
    test_gap: "No test enforces meta.yaml existence for all slots"

  # ============================================================================
  # P3 - LOW (Minor Impact, Fix When Convenient)
  # ============================================================================

  - id: DEF-023
    priority: P3
    severity: LOW
    title: "6 missing runbooks referenced in ops/runbooks/README.md"
    description: |
      ops/runbooks/README.md references 5 non-existent runbooks:
      feature-flags.md, lifespan.md, shared-hash.md, slot1.md, tri-link.md
      Plus docs/runbooks/contract_violation.md
    impact: "Broken internal documentation links"
    evidence:
      - "DRIFT_REPORT.md:318-323"
    root_cause: "README updated with planned runbooks never written"
    reproduction: "cat ops/runbooks/README.md | grep -o '[a-z-]*.md' | xargs -I{} ls ops/runbooks/{}"
    remediation: "Create missing runbooks OR remove links from README"
    test_gap: "No link validation in CI"

  - id: DEF-024
    priority: P3
    severity: LOW
    title: "3 invalid git commit links in attestations"
    description: |
      docs/attestations/2025-09-30-anr-5_1.md contains broken relative git commit links:
      ../../../commit/66e0a5f, ../../../commit/78c67e0, ../../../commit/cad9d66
    impact: "Broken attestation references"
    evidence:
      - "DRIFT_REPORT.md:329-331"
    root_cause: "Git commit links using incorrect path format"
    reproduction: "grep -o '../../../commit/[a-f0-9]*' docs/attestations/*.md"
    remediation: "Fix commit link format or use full GitHub URLs"
    test_gap: "No link format validation"

  - id: DEF-025
    priority: P3
    severity: LOW
    title: "Root README.md 5 days stale (minor)"
    description: |
      Root README last updated 2025-09-28, code updated 2025-10-04 (5 day lag)
    impact: "Minor documentation staleness"
    evidence:
      - "DRIFT_REPORT.md:313"
    root_cause: "README not updated with recent changes"
    reproduction: "git log -1 --format='%ci' README.md; git log -1 --format='%ci' ."
    remediation: "Update root README with recent changes"
    test_gap: "No staleness alerting"

  - id: DEF-026
    priority: P3
    severity: LOW
    title: "6 MEDIUM severity security issues (bandit)"
    description: |
      Bandit found 6 MEDIUM severity issues
    impact: "Potential security concerns"
    evidence:
      - "phase2_summary.txt"
      - "phase2_bandit.json"
    root_cause: "Security patterns flagged"
    reproduction: "bandit -r orchestrator slots --severity-level=medium"
    remediation: "Review and remediate MEDIUM findings"
    test_gap: "No MEDIUM severity gate"

  - id: DEF-027
    priority: P3
    severity: LOW
    title: "Dual contract naming conventions"
    description: |
      Flow fabric uses @1 notation (TRI_REPORT@1)
      Operation contracts use dot notation (tri.calculate)
      No documentation explaining dual system
    impact: "Developer confusion about contract naming"
    evidence:
      - "DRIFT_REPORT.md:105-139"
    root_cause: "Two systems evolved independently"
    reproduction: |
      grep "KNOWN_CONTRACTS" orchestrator/flow_fabric_init.py
      grep -A5 "contracts:" slots/slot04_tri/meta.yaml
    remediation: "Document dual contract system in INTERSLOT_CONTRACTS.md"
    test_gap: "No validation of naming conventions"

  - id: DEF-028
    priority: P3
    severity: LOW
    title: "SIGNALS@1 contract has no metadata"
    description: |
      flow_fabric_init.py declares SIGNALS@1 contract
      but no slot meta.yaml claims to produce or consume it
    impact: "Orphaned contract registration"
    evidence:
      - "DRIFT_REPORT.md:149"
    root_cause: "SIGNALS@1 may be legacy or general-purpose contract"
    reproduction: "grep 'SIGNALS@1' orchestrator/flow_fabric_init.py; grep -r 'SIGNALS@1' slots"
    remediation: "Document SIGNALS@1 purpose or remove if unused"
    test_gap: "No test validates all contracts have producers/consumers"
