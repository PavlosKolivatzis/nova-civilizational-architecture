groups:
- name: federation-recording
  interval: 30s
  rules:
  - record: nova_federation_pull_seconds_p95
    expr: histogram_quantile(0.95, sum by (le) (rate(nova_federation_pull_seconds_bucket[5m])))
  - record: nova_federation_errors_5m
    expr: increase(nova_federation_pull_result_total{status="error"}[5m])
  - record: nova_federation_success_5m
    expr: increase(nova_federation_pull_result_total{status="success"}[5m])
  - record: nova_federation_peer_quality_avg_5m
    expr: avg_over_time(nova_federation_peer_quality[5m])
  - record: nova_federation_peer_quality_median_5m
    expr: quantile_over_time(0.5, nova_federation_peer_quality[5m])
