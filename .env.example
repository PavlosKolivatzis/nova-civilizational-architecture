# =============================================================================
# NOVA Civilizational Architecture - Environment Configuration
# =============================================================================
# Complete environment variable reference for Nova 5.1.1+
# All 142 documented variables with sensible defaults
# =============================================================================

# -----------------------------------------------------------------------------
# Core System Configuration
# -----------------------------------------------------------------------------

# Flask debug mode for app.py (0=off, 1=on; default off for security)
FLASK_DEBUG=0

# Truth threshold for core validation (0.0-1.0)
NOVA_TRUTH_THRESHOLD=0.87

# System operating mode (testing, staging, production)
NOVA_CURRENT_MODE=testing

# Anchor validation mode (STRICT, PERMISSIVE)
NOVA_ANCHOR_VALIDATION_MODE=STRICT

# System log level (DEBUG, INFO, WARNING, ERROR)
NOVA_LOG_LEVEL=INFO

# Logging configuration (duplicates LOG_LEVEL for slot compatibility)
LOG_LEVEL=INFO

# Maximum concurrent processes for parallel operations
NOVA_MAX_CONCURRENT_PROCESSES=12

# Build version and deployment tracking
NOVA_VERSION=5.1.1-polish
NOVA_BUILD_SHA=unknown

# -----------------------------------------------------------------------------
# Security & Authentication
# -----------------------------------------------------------------------------

# JWT secret for token signing (REQUIRED - 32+ characters)
# P0-CR1: Generate secure secret with: python -c 'import secrets; print(secrets.token_hex(32))'
# For testing only, use: test-secret-minimum-32-characters-long-for-security-validation
# NEVER use default in production - system will fail to start if < 32 characters
JWT_SECRET=your-secure-secret-here-minimum-32-characters-long

# API key for external integrations (optional)
NOVA_API_KEY=

# Require security checks (1=enabled, 0=disabled)
NOVA_REQUIRE_SECURITY=1

# Rate limiting for DoS protection (1=enabled, 0=disabled; default ON for security)
# P0-CR3: Protects /phase10/fep/* and /ops/expire-now endpoints
NOVA_RATE_LIMITING_ENABLED=1

# Trusted directory for dynamic Python plugins (default: ./plugins)
# P1-HR1: Plugin paths validated to prevent arbitrary code execution
NOVA_PLUGIN_DIR=./plugins

# Reflection secret for secure internal communication
NOVA_REFLECTION_SECRET=

# -----------------------------------------------------------------------------
# Feature Flags - Core
# -----------------------------------------------------------------------------

# Enable Prometheus metrics endpoint (/metrics)
NOVA_ENABLE_PROMETHEUS=0

# Federation metrics polling cadence (seconds)
NOVA_FED_SCRAPE_INTERVAL=15

# Federation metrics HTTP timeout (seconds)
NOVA_FED_SCRAPE_TIMEOUT=2.0

# Maximum federation poll back-off interval (seconds)
NOVA_FED_SCRAPE_MAX_INTERVAL=120

# Empty-peer remediation threshold (consecutive intervals)
NOVA_FEDERATION_NO_PEER_THRESHOLD=5

# Empty-peer remediation cooldown (seconds)
NOVA_FEDERATION_NO_PEER_COOLDOWN=600

# Enable federation auto-remediation hooks (1=on, 0=off)
NOVA_FEDERATION_AUTOREMEDIATE=1

# Federation backoff multiplier (P1 Audit Fix - Phase 17)
# When remediation triggers, poll interval increases by this factor
# Default: 2.0 (doubles interval on each failure)
# Range: 1.5 - 4.0 (lower = slower backoff, higher = more aggressive backoff)
NOVA_FEDERATION_BACKOFF_MULTIPLIER=2.0

# Legacy fallback for environments still exporting the non-NOVA prefix (prefer the NOVA-prefixed knob above)
FEDERATION_AUTOREMEDIATE=1

# DEV ONLY: force federation client fetches to raise
NOVA_FED_FORCE_ERRORS=0

# Peer quality scoring weights (must sum to ~1 after normalization)
NOVA_FED_QUALITY_W1=0.5
NOVA_FED_QUALITY_W2=0.3
NOVA_FED_QUALITY_W3=0.2

# Peer quality normalization constants
NOVA_FED_QUALITY_LAT_CAP_SEC=2.0
NOVA_FED_QUALITY_TAU_SEC=300

# Optional readiness gate (leave blank to disable quality gating)
NOVA_FED_MIN_PEER_QUALITY=
NOVA_FED_MIN_GOOD_PEERS=1


# Gamma adaptive wisdom governor thresholds
NOVA_GAMMA_ETA_MIN=0.05
NOVA_GAMMA_ETA_MAX=0.15
# Default eta when instantiating the governor
NOVA_GAMMA_ETA_DEFAULT=0.10

# Enable application lifespan management
NOVA_ENABLE_LIFESPAN=0

# Enable TRI linking between slots
NOVA_ENABLE_TRI_LINK=0

# Enable Meta Lens adaptive processing
NOVA_ENABLE_META_LENS=0

# Use shared blake2b hash (fallback: sha256)
NOVA_USE_SHARED_HASH=0

# Enable creativity search metrics
NOVA_ENABLE_CREATIVITY_METRICS=1

# Enable adaptive slot connections
NOVA_ADAPTIVE_CONNECTIONS_ENABLED=0

# Enable hot reload in development
NOVA_HOT_RELOAD=

# Enable Slot 10 civilizational deployment
NOVA_SLOT10_ENABLED=0

# Enable geometric memory (experimental)
NOVA_GM_ENABLED=0

# -----------------------------------------------------------------------------
# Slot 01 - Quantum Entropy
# -----------------------------------------------------------------------------

# Enable quantum-derived entropy for truth anchor operations (true/false)
NOVA_SLOT01_QUANTUM_ENTROPY_ENABLED=1
# Slot 01 Root-Mode migration (1 = canonical root-mode adapter, 0 = legacy adapter)
NOVA_SLOT01_ROOT_MODE=1

# Preferred quantum backend (simulator, google_qcs)
NOVA_SLOT01_QUANTUM_BACKEND=simulator

# Optional deterministic entropy seed for testing (leave blank in production)
NOVA_ENTROPY_SEED=

# Fidelity metrics (mean / CI / bias) emit even when fallback entropy is used.

# Enable PQC attestation for truth anchors (true/false; Phase 12C)
NOVA_SLOT01_PQC_ATTESTATION_ENABLED=1

# PQC signature algorithm (dilithium2; Phase 12C)
NOVA_SLOT01_PQC_ALGORITHM=dilithium2

# Enable reflex backpressure system
NOVA_REFLEX_ENABLED=0

# Reflex shadow mode (monitor without enforcement)
NOVA_REFLEX_SHADOW=1

# -----------------------------------------------------------------------------
# Federation (Phase 15 scaffold)
# -----------------------------------------------------------------------------
FEDERATION_ENABLED=0
FEDERATION_BIND=0.0.0.0:9414
NOVA_FEDERATION_REGISTRY=config/federation_peers.yaml
NOVA_FEDERATION_SKEW_S=120
NOVA_FEDERATION_BODY_MAX=65536
NOVA_FEDERATION_REPLAY_MODE=block
NOVA_FEDERATION_REPLAY_CACHE_SIZE=4096
NOVA_FEDERATION_RATE_RPS=0.5
NOVA_FEDERATION_RATE_BURST=30
NOVA_FEDERATION_HTTP_TIMEOUT_S=2.5
NOVA_FEDERATION_RETRIES=2
NOVA_FEDERATION_TRUST_W_VERIFIED=0.55
NOVA_FEDERATION_RANGE_MAX=256
NOVA_FEDERATION_CHUNK_BYTES_MAX=65536
NOVA_FEDERATION_MAX_DIVERGENCE=2
NOVA_FEDERATION_MANIFEST_TTL_S=3600
NOVA_FEDERATION_TRUST_W_LATENCY=0.15
NOVA_FEDERATION_TRUST_W_AGE=0.15
NOVA_FEDERATION_TRUST_W_CONTINUITY=0.15

# Phase 15-7: Ledger-Federation Correlation
# HTTP endpoint returning {"height": int, "head_ts": unix_timestamp}
NOVA_LEDGER_STATUS_URL=

# Shell command emitting {"height": int, "head_ts": unix_timestamp}
NOVA_LEDGER_STATUS_CMD=

# Phase 16-1: Mock Peer Service (Offline Federation Testing)
# Number of mock peers [0-10], 0=disabled (enables Novelty component testing)
NOVA_FED_MOCK_PEERS=0

# Peer variance [0.05-0.30], higher=more diversity (controls Novelty magnitude)
NOVA_FED_MOCK_STD=0.15

# Phase 16-2: Live Peer Synchronization (Pull-Based)
# Enable live peer sync over HTTP
NOVA_FED_SYNC_ENABLED=0

# Comma-separated peer base URLs (no trailing slash)
NOVA_FED_PEERS=

# Poll cadence (seconds) for pulling peer metrics
NOVA_FED_SYNC_INTERVAL=30

# HTTP timeout (seconds) for peer sync requests
NOVA_FED_SYNC_TIMEOUT=2.5

# Stable node identifier for federation (auto-generated from HOSTNAME+UUID if not set)
NOVA_NODE_ID=

# System hostname used in auto-generated node ID (defaults to "localhost")
HOSTNAME=

# Context auto-switch: solo|federated|auto
NOVA_WISDOM_G_CONTEXT=auto

# Delay (seconds) before switching back to "solo" after losing peers (hysteresis)
NOVA_WISDOM_G_HYSTERESIS_SEC=120

# Minimum live peers required for "federated" context
NOVA_WISDOM_G_MIN_PEERS=1

# -----------------------------------------------------------------------------
# Slot 02 - DeltaThresh Configuration
# -----------------------------------------------------------------------------

# (No additional env vars needed - uses config/feature_flags.py defaults)

# -----------------------------------------------------------------------------
# Slot 03 - Emotional Matrix Configuration
# -----------------------------------------------------------------------------

# Enable escalation detection (0=disabled, 1=enabled)
SLOT3_ESCALATION_ENABLED=1

# Rate limit per minute for emotional signals
SLOT3_RATE_PER_MIN=600

# Swing detection window in seconds
SLOT3_SWING_WINDOW=30

# Swing delta threshold
SLOT3_SWING_DELTA=1.2

# Maximum preview length for content snippets
SLOT3_PREVIEW_MAXLEN=160

# -----------------------------------------------------------------------------
# IDS (Intrusion Detection System) Configuration
# -----------------------------------------------------------------------------

# Enable IDS monitoring (0=disabled, 1=enabled)
IDS_ENABLED=1

# IDS signal weight in composite scores (0.0-1.0)
IDS_WEIGHT=0.1

# IDS sandbox-only mode (1=sandbox, 0=production)
IDS_SANDBOX_ONLY=1

# Enable IDS schema validation (0=disabled, 1=enabled)
IDS_SCHEMA_VALIDATE=0

# Enable strict scope validation (0=disabled, 1=enabled)
IDS_STRICT_SCOPE_VALIDATE=0

# IDS alpha parameter for EMA smoothing (0.0-1.0)
IDS_ALPHA=0.9

# IDS beta parameter for drift detection (0.0-1.0)
IDS_BETA=0.8

# IDS EMA lambda for exponential moving average (0.0-1.0)
IDS_EMA_LAMBDA=0.7

# IDS stable state threshold (0.0-1.0)
IDS_STABLE_THRESHOLD=0.75

# IDS reintegrating state threshold (0.0-1.0)
IDS_REINTEGRATING_THRESHOLD=0.5

# IDS diverging state threshold (0.0-1.0)
IDS_DIVERGING_THRESHOLD=0.25

# -----------------------------------------------------------------------------
# Slot 07 - Production Controls Configuration
# -----------------------------------------------------------------------------

# Enable production controls (0=disabled, 1=enabled)
PRODUCTION_CONTROLS_ENABLED=1

# Enable circuit breaker (0=disabled, 1=enabled)
CIRCUIT_BREAKER_ENABLED=1

# Circuit breaker failure count threshold before trip
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Circuit breaker error rate threshold (0.0-1.0) before trip
CIRCUIT_BREAKER_ERROR_THRESHOLD=0.5

# Circuit breaker reset timeout in seconds
CIRCUIT_BREAKER_RESET_TIMEOUT=60.0

# Circuit breaker recovery time in seconds
CIRCUIT_BREAKER_RECOVERY_TIME=60

# Enable rate limiting (0=disabled, 1=enabled)
RATE_LIMIT_ENABLED=1

# Rate limit: requests per minute
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# Rate limit: burst size for temporary spikes
RATE_LIMIT_BURST_SIZE=10

# Enable resource protection (0=disabled, 1=enabled)
RESOURCE_PROTECTION_ENABLED=1

# Maximum payload size in megabytes
MAX_PAYLOAD_SIZE_MB=10

# Maximum processing time in seconds per request
MAX_PROCESSING_TIME_SECONDS=30

# Maximum concurrent requests allowed
MAX_CONCURRENT_REQUESTS=50

# Enable health check monitoring (0=disabled, 1=enabled)
HEALTH_CHECK_ENABLED=1

# Health check interval in seconds
HEALTH_CHECK_INTERVAL_SECONDS=10

# Enable metrics collection (0=disabled, 1=enabled)
METRICS_COLLECTION_ENABLED=1

# Alert on circuit breaker trip (0=disabled, 1=enabled)
ALERT_ON_CIRCUIT_BREAKER_TRIP=1

# Enable failover to backup systems (0=disabled, 1=enabled)
FAILOVER_ENABLED=1

# Enable backup mode (0=disabled, 1=enabled)
BACKUP_MODE_ENABLED=0

# Enable graceful degradation under load (0=disabled, 1=enabled)
GRACEFUL_DEGRADATION_ENABLED=1

# -----------------------------------------------------------------------------
# Router Configuration
# -----------------------------------------------------------------------------

# Router latency target in milliseconds
NOVA_ROUTER_LATENCY_MS=1000

# Router error threshold (0.0-1.0)
NOVA_ROUTER_ERROR_THRESHOLD=0.2

# Router timeout multiplier for adaptive timeouts
NOVA_ROUTER_TIMEOUT_MULTIPLIER=1.5

# Router timeout cap in seconds
NOVA_ROUTER_TIMEOUT_CAP_S=30

# -----------------------------------------------------------------------------
# ANR (Adaptive Neural Router) Configuration
# -----------------------------------------------------------------------------

# Enable ANR adaptive routing (0=disabled, 1=enabled)
NOVA_ANR_ENABLED=0

# ANR pilot traffic percentage (0.0-1.0)
NOVA_ANR_PILOT=0.0

# ANR epsilon for exploration (0.0-1.0)
NOVA_ANR_EPSILON=0.05

# ANR shadow sampling rate (0.0-1.0)
NOVA_ANR_SHADOW_SAMPLE=1.0

# Learn from shadow traffic (1=enabled, 0=disabled)
NOVA_ANR_LEARN_SHADOW=1

# Path to ANR LinUCB bandit state file
NOVA_ANR_STATE_PATH=./state/anr_linucb.json

# ANR bandit alpha parameter (confidence)
NOVA_ANR_ALPHA=0.8

# ANR ridge regularization parameter
NOVA_ANR_RIDGE=0.01

# Strict mode on anomaly detection (1=abort, 0=continue)
NOVA_ANR_STRICT_ON_ANOMALY=0

# Maximum fast-path probability cap
NOVA_ANR_MAX_FAST_PROB=0.15

# ANR kill switch (1=disable completely, 0=normal)
NOVA_ANR_KILL=0

# -----------------------------------------------------------------------------
# Semantic Creativity Search Configuration
# -----------------------------------------------------------------------------

# Enable early stopping (1=enabled, 0=disabled)
NOVA_CREATIVITY_EARLY_STOP=0

# Enable two-phase refinement
NOVA_CREATIVITY_TWO_PHASE=0

# Enable branch-and-bound pruning
NOVA_CREATIVITY_BNB=0

# Debug mode for creativity search
NOVA_CREATIVITY_DEBUG=0

# Maximum search tree depth
NOVA_CREATIVITY_MAX_DEPTH=3

# Maximum branches per node
NOVA_CREATIVITY_MAX_BRANCHES=6

# Maximum tokens per probe
NOVA_CREATIVITY_MAX_TOKENS=64

# Novelty eta for diversity scoring
NOVA_CREATIVITY_NOVELTY_ETA=0.08

# Information gain epsilon threshold
NOVA_CREATIVITY_INFO_GAIN_EPS=0.02

# Minimum entropy threshold
NOVA_CREATIVITY_ENTROPY_MIN=1.2

# Maximum entropy threshold
NOVA_CREATIVITY_ENTROPY_MAX=2.8

# EWMA alpha for smoothing
NOVA_CREATIVITY_EWMA_ALPHA=0.01

# Entropy delta stall threshold
NOVA_CREATIVITY_ENTROPY_DELTA_STALL=0.01

# Early stop target score
NOVA_CREATIVITY_EARLY_STOP_SCORE=0.62

# Early stop minimum info gain
NOVA_CREATIVITY_EARLY_STOP_IG=0.03

# Two-phase refinement threshold
NOVA_CREATIVITY_TWO_PHASE_THRESH=0.045

# Two-phase minimum branches
NOVA_CREATIVITY_TWO_PHASE_MIN=3

# Branch-and-bound quality threshold
NOVA_CREATIVITY_BNB_Q=0.40

# Branch-and-bound safety margin
NOVA_CREATIVITY_BNB_MARGIN=0.05

# -----------------------------------------------------------------------------
# Unlearn Weighting System
# -----------------------------------------------------------------------------

# Enable anomaly-driven unlearn weighting (1=enabled, 0=disabled)
NOVA_UNLEARN_ANOMALY=0

# EWMA smoothing factor for anomaly detection
NOVA_UNLEARN_ANOM_ALPHA=0.30

# Engagement threshold (tau)
NOVA_UNLEARN_ANOM_TAU=1.00

# Hysteresis margin
NOVA_UNLEARN_ANOM_MARGIN=0.20

# Linear gain above threshold
NOVA_UNLEARN_ANOM_GAIN=0.50

# Maximum multiplier cap
NOVA_UNLEARN_ANOM_CAP=3.00

# Sliding window size
NOVA_UNLEARN_ANOM_WIN=5

# Required breaches for engagement
NOVA_UNLEARN_ANOM_REQ=3

# Minimum half-life in seconds
NOVA_UNLEARN_MIN_HALF_LIFE=60

# Maximum half-life in seconds
NOVA_UNLEARN_MAX_HALF_LIFE=1800

# Default weights: TRI drift sensitivity
NOVA_UNLEARN_W_TRI=0.5

# Default weights: system pressure sensitivity
NOVA_UNLEARN_W_PRESS=0.4

# Default weights: phase jitter sensitivity
NOVA_UNLEARN_W_JITTER=0.1

# Enable pulse logging to NDJSON
NOVA_UNLEARN_PULSE_LOG=1

# Path to pulse log file
NOVA_UNLEARN_PULSE_PATH=logs/unlearn_pulses.ndjson

# Maximum log file size in bytes
NOVA_UNLEARN_LOG_MAX_BYTES=10485760

# Number of log file backups
NOVA_UNLEARN_LOG_BACKUPS=5

# -----------------------------------------------------------------------------
# Unlearn Canary System
# -----------------------------------------------------------------------------

# Enable canary monitoring (1=enabled, 0=disabled)
NOVA_UNLEARN_CANARY=0

# Canary check period in seconds
NOVA_UNLEARN_CANARY_PERIOD=3600

# Canary key to monitor
NOVA_UNLEARN_CANARY_KEY=slot06.cultural_profile

# Canary publisher slot
NOVA_UNLEARN_CANARY_PUBLISHER=slot05

# Minimum TTL for eligibility in seconds
NOVA_UNLEARN_CANARY_TTL=60

# Age since expiry threshold in seconds
NOVA_UNLEARN_CANARY_AGE=120

# -----------------------------------------------------------------------------
# Flow Fabric Configuration
# -----------------------------------------------------------------------------

# Enable flow metrics collection
NOVA_FLOW_METRICS_ENABLED=1

# Flow mode (BALANCED, FAST, THOROUGH)
NOVA_FLOW_MODE=BALANCED

# Lazy initialization of flow fabric (1=lazy, 0=eager)
NOVA_FLOW_FABRIC_LAZY_INIT=1

# -----------------------------------------------------------------------------
# Slot-Specific Weights (Unlearn System)
# -----------------------------------------------------------------------------

# Slot 04 (TRI): TRI drift weight
NOVA_SLOT04_W_TRI=0.6

# Slot 04 (TRI): System pressure weight
NOVA_SLOT04_W_PRESS=0.3

# Slot 04 (TRI): Phase jitter weight
NOVA_SLOT04_W_JITTER=0.05

# Slot 06 (Cultural): TRI drift weight
NOVA_SLOT06_W_TRI=0.7

# Slot 06 (Cultural): System pressure weight
NOVA_SLOT06_W_PRESS=0.5

# Slot 06 (Cultural): Phase jitter weight
NOVA_SLOT06_W_JITTER=0.1

# Slot 07 (Production): TRI drift weight
NOVA_SLOT07_W_TRI=0.3

# Slot 07 (Production): System pressure weight
NOVA_SLOT07_W_PRESS=0.8

# Slot 07 (Production): Phase jitter weight
NOVA_SLOT07_W_JITTER=0.2

# Slot 08 (Memory): TRI drift weight
NOVA_SLOT08_W_TRI=0.4

# Slot 08 (Memory): System pressure weight
NOVA_SLOT08_W_PRESS=0.6

# Slot 08 (Memory): Phase jitter weight
NOVA_SLOT08_W_JITTER=0.1

# Slot 10 (Deployment): TRI drift weight
NOVA_SLOT10_W_TRI=0.5

# Slot 10 (Deployment): System pressure weight
NOVA_SLOT10_W_PRESS=0.7

# Slot 10 (Deployment): Phase jitter weight
NOVA_SLOT10_W_JITTER=0.3

# -----------------------------------------------------------------------------
# Slot 07 - Production Controls (Reflex)
# -----------------------------------------------------------------------------

# Reflex backpressure threshold (0.0-1.0)
NOVA_SLOT07_REFLEX_THRESHOLD=0.70

# Reflex slope for pressure mapping
NOVA_SLOT07_REFLEX_SLOPE=1.50

# Phase lock environment override
SLOT07_PHASE_LOCK=

# -----------------------------------------------------------------------------
# Slot 08 - Memory Lock
# -----------------------------------------------------------------------------

# Phase lock threshold for memory repair
SLOT08_PHASE_LOCK_THRESHOLD=0.5

# PQC key rotation period in days (Phase 12C)
NOVA_SLOT08_PQC_ROTATION_DAYS=90

# Enable PQC verification logging (true/false; Phase 12C)
NOVA_SLOT08_PQC_VERIFY_LOG=1

# -----------------------------------------------------------------------------
# Slot 10 - Civilizational Deployment
# -----------------------------------------------------------------------------

# TRI gate threshold for deployment validation
NOVA_TRI_GATE=0.66

# Enable LightClock gating (1=enabled, 0=disabled)
NOVA_LIGHTCLOCK_GATING=1

# Enable deep LightClock phase checking
NOVA_LIGHTCLOCK_DEEP=1

# Allowed processing modes (comma-separated)
NOVA_SLOT9_ALLOWED=ALLOW_FASTPATH,STANDARD_PROCESSING

# Phase lock gate enable
NOVA_PHASE_LOCK_GATE=
NOVA_PHASE_LOCK_MIN=
NOVA_PHASE_LOCK_MAX=
NOVA_PHASE_LOCK_CEILING=

# Publish TRI updates (1=enabled, 0=disabled)
NOVA_PUBLISH_TRI=1

# Enable probabilistic belief propagation contracts (1=enabled, 0=disabled)
NOVA_ENABLE_PROBABILISTIC_CONTRACTS=1

# Publish phase lock belief updates from Slot 07 (1=enabled, 0=disabled)
NOVA_PUBLISH_PHASE_LOCK=1


# -----------------------------------------------------------------------------
# Meta Lens Configuration
# -----------------------------------------------------------------------------

# Meta Lens maximum iterations
META_LENS_MAX_ITERS=3
NOVA_META_LENS_MAX_ITERS=3

# Meta Lens alpha parameter
META_LENS_ALPHA=0.5
NOVA_META_LENS_ALPHA=0.5

# Meta Lens epsilon threshold
META_LENS_EPSILON=0.02
NOVA_META_LENS_EPSILON=0.02

# Adapter timeout in milliseconds
META_LENS_ADAPTER_TIMEOUT_MS=200

# Adapter maximum retries
META_LENS_ADAPTER_MAX_RETRIES=2

# Adapter circuit breaker TTL in seconds
META_LENS_ADAPTER_BREAKER_TTL_SEC=30

# Strict validation mode (1=enabled, 0=disabled)
META_LENS_STRICT_VALIDATION=0

# Enforce real processing in tests (1=enabled, 0=disabled)
NOVA_META_LENS_TEST_ENFORCE_REAL=0

# -----------------------------------------------------------------------------
# TRI (Truth-Resonance-Integrity) Configuration
# -----------------------------------------------------------------------------

# TRI coherence override
TRI_COHERENCE=

# TRI phase jitter override
TRI_PHASE_JITTER=

# TRI jitter stability threshold
TRI_JITTER_STABLE=0.3

# -----------------------------------------------------------------------------
# Slot Configuration
# -----------------------------------------------------------------------------

# Enabled slots (comma-separated slot IDs)
NOVA_SLOTS=

# Slot 2 environment override
SLOT2_ENV=

# -----------------------------------------------------------------------------
# Platform Detection (Auto-populated by environment)
# -----------------------------------------------------------------------------

# Platform identifier
PLATFORM=unknown

# Python version
PYTHON_VERSION=unknown

# Operational mode (for slot 2)
OPERATIONAL_MODE=

# -----------------------------------------------------------------------------
# Phase 9 - Unified Risk Field (URF)
# -----------------------------------------------------------------------------

# Enable URF integration (0=disabled, 1=enabled)
# URF reconciles epistemic (RRI) and temporal (predictive_collapse_risk) signals
# into unified governance/routing/deployment decisions
NOVA_ENABLE_URF=0

# -----------------------------------------------------------------------------
# Phase 10 - Meta-Stability Engine (MSE)
# -----------------------------------------------------------------------------

# Enable MSE integration (0=disabled, 1=enabled)
# MSE detects instability of stability itself by monitoring variance in URF composite_risk
NOVA_ENABLE_MSE=0

# -----------------------------------------------------------------------------
# Phase 11 - Operational Regime Policy (ORP)
# -----------------------------------------------------------------------------

# Enable ORP integration (0=disabled, 1=enabled)
# ORP fuses URF, MSE, predictive, consistency, and CSI signals into regimes that
# tighten thresholds, limit traffic, force safe mode, or freeze deployments
NOVA_ENABLE_ORP=0

# Phase 11.3 - Regime Transition Ledger
# Enable regime transition ledger recording (0=disabled, 1=enabled)
# Records append-only history of regime changes for duration calculation and oscillation detection
NOVA_ENABLE_REGIME_LEDGER=0

# Phase 11.3 Step 2 - Wisdom Governor η Scaling
# Enable ORP-based learning rate scaling (0=disabled, 1=enabled)
# Adapts η based on operational regime: normal=1.0, heightened=0.90-0.95, emergency=0.50, recovery=0.25
NOVA_ENABLE_ETA_SCALING=0

# Processing mode (for slot 2)
PROCESSING_MODE=

# Vercel deployment detection
VERCEL=
VERCEL_ENV=

# AWS Lambda detection
AWS_LAMBDA_FUNCTION_NAME=

# Google Cloud Function detection
FUNCTION_TARGET=
K_SERVICE=

# GitHub Actions CI detection
GITHUB_ACTIONS=

# -----------------------------------------------------------------------------
# Distortion Detection
# -----------------------------------------------------------------------------

# Distortion detection sensitivity (0.0-1.0)
NOVA_DISTORTION_DETECTION_SENSITIVITY=0.92

# -----------------------------------------------------------------------------
# Memory Ethics
# -----------------------------------------------------------------------------

# Enable memory ethics constraints (true/false)
NOVA_MEMORY_ETHICS_ENABLED=1

# -----------------------------------------------------------------------------
# Emotional Matrix (Slot 03)
# -----------------------------------------------------------------------------

# Phase lock threshold for emotional state
NOVA_EMO_PHASE_LOCK_THRESH=0.6

# -----------------------------------------------------------------------------
# Performance & Testing
# -----------------------------------------------------------------------------

# Performance test scale multiplier
NOVA_PERF_SCALE=1.0

# Allow expiration testing (1=enabled, 0=disabled)
NOVA_ALLOW_EXPIRE_TEST=1

# Test expiration age in seconds
NOVA_EXPIRE_TEST_AGE=

# Smeep health check interval in seconds
NOVA_SMEEP_INTERVAL=15

# -----------------------------------------------------------------------------
# Phase 10: Ethical Autonomy & Federated Cognition
# -----------------------------------------------------------------------------

# Federated Consensus Quality threshold (0.0-1.0; Phase 10 FEP)
PHASE10_FCQ_THRESHOLD=0.90

# TRI minimum threshold for autonomy (0.0-1.0; Phase 10 AG)
PHASE10_TRI_MIN=0.80

# Ethical Autonomy Index target (0.0-1.0; Phase 10 AG)
PHASE10_EAI_TARGET=0.85

# -----------------------------------------------------------------------------
# Phase 11: ARC (Adaptive Resonance Consistency)
# -----------------------------------------------------------------------------

# Enable ARC consistency monitoring (0=disabled, 1=enabled)
NOVA_ARC_ENABLED=0

# ARC sampling rate for consistency checks (0.0-1.0)
NOVA_ARC_SAMPLE=0.10

# -----------------------------------------------------------------------------
# Phase 13/14 Autonomous Verification Ledger (AVL) + Checkpoints
# -----------------------------------------------------------------------------

# Enable ledger emission and verification (0=disabled, 1=enabled)
LEDGER_ENABLED=1

# Ledger persistence backend (memory, postgres)
LEDGER_BACKEND=memory

# PostgreSQL DSN for ledger persistence (postgresql+asyncpg://user:pass@host:port/db)
LEDGER_DSN=

# Connection pool size for PostgreSQL
LEDGER_POOL_SIZE=5

# Connection timeout in seconds for PostgreSQL
LEDGER_TIMEOUT=30

# Enable automatic checkpoint creation (0=disabled, 1=enabled)
LEDGER_CHECKPOINT_ENABLED=1

# Checkpoint interval (seconds)
LEDGER_CHECKPOINT_EVERY_SECONDS=300

# Minimum records to trigger checkpoint
LEDGER_CHECKPOINT_MIN_RECORDS=1000

# Trust score weighting: fidelity component (0.0-1.0)
LEDGER_TRUST_WEIGHT_FIDELITY=0.5

# Trust score weighting: PQC signature rate component (0.0-1.0)
LEDGER_TRUST_WEIGHT_PQC_RATE=0.2

# Trust score weighting: verification rate component (0.0-1.0)
LEDGER_TRUST_WEIGHT_VERIFY_RATE=0.2

# Trust score weighting: hash continuity component (0.0-1.0)
LEDGER_TRUST_WEIGHT_CONTINUITY=0.1

# -----------------------------------------------------------------------------
# Phase 14-2: Merkle Checkpoints & PQC Signer
# -----------------------------------------------------------------------------

# Enable automatic checkpoint creation (1=enabled, 0=disabled)
LEDGER_CHECKPOINT_ENABLED=1

# Minimum seconds between checkpoints
LEDGER_CHECKPOINT_EVERY_SECONDS=300

# Minimum records required for checkpoint creation
LEDGER_CHECKPOINT_MIN_RECORDS=100

# -----------------------------------------------------------------------------
# Phase 14-4: Persistent PQC Keyring
# -----------------------------------------------------------------------------

# PQC keyring directory (default: ~/.nova/keyring/)
NOVA_KEYRING_DIR=

# PQC keyfile path (default: <keyring_dir>/pqc_key_01.json)
NOVA_PQC_KEYFILE=

# -----------------------------------------------------------------------------
# Adaptive Wisdom Governor (Bifurcation-Aware Control)
# -----------------------------------------------------------------------------

# Enable adaptive wisdom governor poller (true/false)
NOVA_WISDOM_GOVERNOR_ENABLED=0

# Polling interval for eigenvalue analysis (seconds)
NOVA_WISDOM_POLL_INTERVAL=15.0

# Quality target for wisdom learning (0.0-1.0)
NOVA_WISDOM_Q=0.7

# Reference stability margin
NOVA_WISDOM_S_REF=0.05

# Stability restoration rate
NOVA_WISDOM_A1=0.2

# Stability cost of learning
NOVA_WISDOM_A2=0.1

# Proportional gain for PD controller
NOVA_WISDOM_KP=0.3

# Derivative gain for PD controller
NOVA_WISDOM_KD=0.15

# Learning rate bounds
NOVA_WISDOM_ETA_MIN=0.05
NOVA_WISDOM_ETA_MAX=0.18
NOVA_WISDOM_ETA_DEFAULT=0.10

# Hopf bifurcation detection threshold
NOVA_WISDOM_HOPF_THRESHOLD=0.02

# --- Mode Transition Thresholds (P1 Audit Fix - Phase 17) ---
# Stability margin thresholds for adaptive mode transitions
# These control when the wisdom governor switches between operational modes

# Critical margin (S < this → immediate freeze learning)
# CRITICAL: Below this, system enters survival mode with η = η_min
# Default: 0.01 (1% eigenvalue margin - minimal stability)
# Range: 0.005 - 0.02 (lower = more aggressive freeze, higher = more tolerance)
NOVA_WISDOM_CRITICAL_MARGIN=0.01

# Stabilizing margin (S < this → stabilizing mode)
# Triggers conservative learning to prevent bifurcation approach
# Default: 0.02 (2% eigenvalue margin)
# Range: 0.01 - 0.05 (should be > critical_margin)
NOVA_WISDOM_STABILIZING_MARGIN=0.02

# Exploring margin (S > this AND G < exploring_G → exploring mode)
# Safe to increase learning rate when stable and low generativity
# Default: 0.10 (10% eigenvalue margin - very stable)
# Range: 0.05 - 0.20 (lower = more conservative exploration)
NOVA_WISDOM_EXPLORING_MARGIN=0.10

# Optimal margin (S > this AND G >= optimal_G → optimal mode)
# Balance stability and generativity for best performance
# Default: 0.05 (5% eigenvalue margin)
# Range: 0.03 - 0.10 (should be < exploring_margin)
NOVA_WISDOM_OPTIMAL_MARGIN=0.05

# Exploring G threshold (G < this when S > exploring_margin → exploring mode)
# Low generativity signals opportunity to increase learning
# Default: 0.60 (60% of maximum generativity)
# Range: 0.40 - 0.80 (lower = earlier exploration trigger)
NOVA_WISDOM_EXPLORING_G=0.60

# Optimal G threshold (G >= this when S > optimal_margin → optimal mode)
# High generativity indicates effective learning
# Default: 0.70 (70% of maximum generativity)
# Range: 0.60 - 0.90 (should be > exploring_G)
NOVA_WISDOM_OPTIMAL_G=0.70

# --- Slot 7 Wisdom Backpressure (Phase 15-8.2) ---
# Enable wisdom-aware job parallelism control
NOVA_WISDOM_BACKPRESSURE_ENABLED=0

# Job parallelism limits based on stability
NOVA_SLOT07_MAX_JOBS_BASELINE=16    # Normal operation
NOVA_SLOT07_MAX_JOBS_FROZEN=2       # Frozen mode (critical instability)
NOVA_SLOT07_MAX_JOBS_REDUCED=6      # Low stability (S < threshold)
NOVA_SLOT07_STABILITY_THRESHOLD=0.03 # S threshold for reduced parallelism
# TRI drift threshold (Z score) that triggers backpressure (Phase 2)
NOVA_SLOT07_TRI_DRIFT_THRESHOLD=2.2
# TRI-specific stability threshold override when drift exceeds limit
NOVA_SLOT07_STABILITY_THRESHOLD_TRI=0.05

# --- Slot 4 TRI Feedback (Phase 15-8.2) ---
# Enable TRI coherence → η cap feedback loop
NOVA_TRI_ETA_CAP_ENABLED=1

# Coherence thresholds for η cap
NOVA_TRI_COHERENCE_HIGH=0.85        # High coherence threshold (very stable)
NOVA_TRI_COHERENCE_LOW=0.40         # Low coherence threshold (unstable)

# Learning rate caps based on coherence
NOVA_TRI_ETA_CAP_HIGH=0.18          # Max η when C > high threshold
NOVA_TRI_ETA_CAP_LOW=0.08           # Max η when C < low threshold

# --- Generativity Integration (Phase 15-8.4) ---
# Generativity score G* = α·P + β·N + γ·Cc
# where P = progress (γ growth), N = novelty (peer diversity), Cc = consistency (η stability)

# Component weights (α, β, γ)
NOVA_WISDOM_G_WEIGHTS=0.4,0.3,0.3   # α=progress, β=novelty, γ=consistency

# Generativity target and bias gain
NOVA_WISDOM_G_TARGET=0.6            # Target generativity G₀
NOVA_WISDOM_G_KAPPA=0.02            # Bias gain κ (Δη = κ·(G* - G₀))

# Gating thresholds (disable bias when unstable)
NOVA_WISDOM_G_MIN_S=0.03            # Minimum stability margin to apply bias
NOVA_WISDOM_G_MIN_H=0.02            # Minimum Hopf distance to apply bias

# -----------------------------------------------------------------------------
# Publication & Research Infrastructure
# -----------------------------------------------------------------------------

# Zenodo API token for automated deposition (obtain from https://zenodo.org/account/settings/applications/tokens)
# Required for publishing reproducibility kits and research artifacts
ZENODO_TOKEN=

# =============================================================================
# End of Configuration
# =============================================================================
NOVA_TEMPORAL_DRIFT_THRESHOLD=0.3
NOVA_TEMPORAL_VARIANCE_THRESHOLD=0.1
NOVA_TEMPORAL_PREDICTION_ERROR_THRESHOLD=0.2
NOVA_MIN_TEMPORAL_COHERENCE=0.7
NOVA_PREDICTIVE_COLLAPSE_THRESHOLD=0.8
NOVA_PREDICTIVE_ACCELERATION_THRESHOLD=0.4
NOVA_PREDICTIVE_HISTORY_WINDOW=5

# Phase 7 Step 5: Emergent Pattern Detector (EPD)
# Enable pattern detection for governance oscillation, predictive creep, escalation loops
NOVA_ENABLE_EPD=false

# Pattern detection cooldown window (ticks) - prevents alert spam
NOVA_PREDICTIVE_PATTERN_COOLDOWN=20

# Phase 7 Step 6: Multi-Slot Consistency (MSC)
# Enable cross-slot conflict detection (safety/culture/predictive consistency)
NOVA_ENABLE_MSC=false

# Consistency gap threshold (governance blocks if gap_score >= threshold)
# Default: 0.6 (60% composite conflict score)
NOVA_CONSISTENCY_GAP_THRESHOLD=0.6

# Consistency severity threshold (governance blocks if severity >= threshold)
# Default: 0.7 (70% maximum component conflict)
NOVA_CONSISTENCY_SEVERITY_THRESHOLD=0.7

# Phase 7.0-RC: Memory Resonance
# Enable 7-day rolling TRSI memory tracking for long-term stability analysis
NOVA_ENABLE_MEMORY_RESONANCE=false

# Phase 7.0-RC: Stress Testing
# Enable stress simulation for resilience validation (test isolation only)
# WARNING: Only enable in test environments - injects drift/jitter anomalies
NOVA_ENABLE_STRESS_TEST=false
